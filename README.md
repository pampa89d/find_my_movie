# Умный поиск фильмов

Стриминговый сервис хочет усовершенствовать поиск. Сейчас поиск происходит по режиссеру, актеру и названию фильма, при этом никак не учитывается описание фильма (а большая часть из них даже не добавлена на сайт). Вашей команде предстоит собрать выборку из не менее, чем 5000 описаний фильмов и построить систему поиска наиболее подходящих под пользовательский запрос фильмов. Желательно, чтобы описания фильмов были на русском языке, но и английский тоже подойдет (это зависит от базы, которую вы собираетесь парсить).  

## Задание

Разработать систему поиска фильма по пользовательскому запросу. Сервис должен принимать на вход описание фильма от пользователя и возвращать заданное количество подходящих вариантов. Демо должно быть развернуто через `streamlit` и `huggingface spaces`. Макет интерфейса сервиса можно найти [тут](mock.png). 

<img src="architecture.png">

## Релизы 

### Релиз 1.0 

⏱️ __Срок__: среда, 17:00

* сделать `csv`-файл следующей структуры: 

| `page_url` | `image_url` | `movie_title` | `description` | 
|-|-|-|-|

`image_url` - ссылка на постер фильма

`page_url` - ссылка на первоисточник (страницу, откуда вы забирали информацию)

* сделать `py`-файл, содержащий скрипт с парсингом и сохранением данных
* реализовать `streamlit`-скрипт `main.py`, который возвращает случайные 10 позиций из `csv`-файла формате: `название фильма – описание`

### Релиз 2.0

⏱️ __Срок__: четверг, 17:00

* сделать `ipynb`-файл с демострационным примером работы сервиса (там должны находиться сырые функции, которые отражают логику работы сервиса)

### Релиз 3.0

⏱️ __Срок__: пятница, 16:00

* сделать `main.py`-файл, содержащий скрипт, реализующий `streamlit`-сервис
* сделать `README.MD`, содержащий описание репозитория и способ запуска вашего сервиса

### Рекомендации

В качестве технологий стоит обратить внимание на: 

* языковые модели ruBERT ([1](https://huggingface.co/cointegrated/rubert-tiny),[2](https://huggingface.co/cointegrated/rubert-tiny2))
  - если сервис работает с английским языком - пользуйтесь аналогичными моделями для английского языка
* библиотеку [Sentence Transformers](https://www.sbert.net/)
* поиск должен происходить максимально быстро, в этом может помочь [faiss](https://github.com/facebookresearch/faiss)
* изучите разные сайты на предмет наличия возможности парсинга ([ithinker](https://ithinker.ru/service/movies/), [Кинопоиск](https://www.kinopoisk.ru/) и прочие)
* пробуйте использовать другие метрики близости – результат может отличаться в произвольную сторону
* в процессе сбора данных лучше не ограничиваться указанными выше полями, а собирать всё, что можно собрать со страницы – это позволит сделать уточняющие поля для более качественного поиска (например, год выхода или режиссер)
* в общем случае вы будете решать задачу симметричного семантического поиска: запрос должен быть подробным и по длине быть сопоставим с документами в хранилище. Это не всегда удобно: часто пользователю не хочется долго печатать, а значит его запрос будет короче описания объектов. Тогда можно рассмотреть модели для [ассиметричного семантического поиска](https://www.sbert.net/examples/applications/semantic-search/README.html)
* Дополните сервис возможностью получать краткое содержание сюжета фильма (Sber GigaChat, YandexGPT, парсинг сюжета с Википедии и тд).
* Упакуйте свое приложение в docker-контейнер и разместите образ на docker hub. Чтобы контейнер весил не очень много, обратите внимание, что [некоторые модели](https://huggingface.co/cointegrated/rubert-tiny2) с hugging-face доступны по API (переходите в карточку модели, жмите кнопку `Deploy` и выбирайте `Inference API (serverless)`: вам будет предоставлен код, по которому можно обратиться к модели и получить результат, за инференс будет отвечать сервис hf). 

### Дополнительно

* Небольшое видео по парсингу: https://www.youtube.com/watch?v=7hn1_t2ZtJQ
* Статья по парсингу: https://habr.com/ru/companies/selectel/articles/754674/


